
Object.Pipeline.compr-phasevocoder-simple-playback [
	{
		index $COMPR_PIPELINE_ID

		Object.Widget.host-copier.1 {
			stream_name $COMPR_PCM_NAME
			pcm_id $COMPR_PCM_ID
			num_input_audio_formats 20
			CombineArrays.Object.Base.input_audio_format [
				{
					in_rate	[
						8000
						44100
						48000
						96000
						192000
					]
					in_bit_depth [ 8 ]
					in_valid_bit_depth [ 8 ]
					in_sample_type [ $SAMPLE_TYPE_UNSIGNED_INTEGER ]

				}
				{
					in_rate	[
						8000
						44100
						48000
						96000
						192000
					]
					in_bit_depth [ 16 ]
					in_valid_bit_depth [ 16 ]
				}
				{
					in_rate	[
						8000
						44100
						48000
						96000
						192000
					]
					in_bit_depth [ 32 ]
					in_valid_bit_depth [ 24 ]
				}
				{
					in_rate	[
						8000
						44100
						48000
						96000
						192000
					]
					in_bit_depth [ 32 ]
					in_valid_bit_depth [ 32 ]
				}
			]

			num_output_audio_formats 20
			CombineArrays.Object.Base.output_audio_format [
				{
					out_rate [
						8000
						44100
						48000
						96000
						192000
					]
					out_bit_depth [ 8 ]
					out_valid_bit_depth [ 8 ]
					out_sample_type [ $SAMPLE_TYPE_UNSIGNED_INTEGER ]
				}
				{
					out_rate [
						8000
						44100
						48000
						96000
						192000
					]
					out_bit_depth [ 16 ]
					out_valid_bit_depth [ 16 ]
				}
				{
					out_rate [
						8000
						44100
						48000
						96000
						192000
					]
					out_bit_depth [ 32 ]
					out_valid_bit_depth [ 24 ]
				}
				{
					out_rate [
						8000
						44100
						48000
						96000
						192000
					]
					out_bit_depth [ 32 ]
					out_valid_bit_depth [ 32 ]
				}
			]
		}

		Object.Widget.decoder.1 {
			scheduler_domain DP
			domain_id 123
			core_id 1
			num_input_audio_formats 20
			CombineArrays.Object.Base.input_audio_format [
				{
					in_rate	[
						8000
						44100
						48000
						96000
						192000
					]
					in_bit_depth [ 8 ]
					in_valid_bit_depth [ 8 ]
					in_sample_type [ $SAMPLE_TYPE_UNSIGNED_INTEGER ]
				}
				{
					in_rate	[
						8000
						44100
						48000
						96000
						192000
					]
					in_bit_depth [ 16 ]
					in_valid_bit_depth [ 16 ]
				}
				{
					in_rate	[
						8000
						44100
						48000
						96000
						192000
					]
					in_bit_depth [ 32 ]
					in_valid_bit_depth [ 24 ]
				}
				{
					in_rate	[
						8000
						44100
						48000
						96000
						192000
					]
					in_bit_depth [ 32 ]
					in_valid_bit_depth [ 32 ]
				}
			]

			num_output_audio_formats 20
			CombineArrays.Object.Base.output_audio_format [
				{
					out_rate [
						8000
						44100
						48000
						96000
						192000
					]
					out_bit_depth [ 8 ]
					out_valid_bit_depth [ 8 ]
					out_sample_type [ $SAMPLE_TYPE_UNSIGNED_INTEGER ]
				}
				{
					out_rate [
						8000
						44100
						48000
						96000
						192000
					]
					out_bit_depth [ 16 ]
					out_valid_bit_depth [ 16 ]
				}
				{
					out_rate [
						8000
						44100
						48000
						96000
						192000
					]
					out_bit_depth [ 32 ]
					out_valid_bit_depth [ 24 ]
				}
				{
					out_rate [
						8000
						44100
						48000
						96000
						192000
					]
					out_bit_depth [ 32 ]
					out_valid_bit_depth [ 32 ]
				}
			]
		}

		# converts the input to S32_LE
		Object.Widget.module-copier.2 {
			scheduler_domain DP
			domain_id 123
			num_input_audio_formats 20
			CombineArrays.Object.Base.input_audio_format [
				{
					in_rate	[
						8000
						44100
						48000
						96000
						192000
					]
					in_bit_depth [ 8 ]
					in_valid_bit_depth [ 8 ]
					in_sample_type [ $SAMPLE_TYPE_UNSIGNED_INTEGER ]
				}
				{
					in_rate	[
						8000
						44100
						48000
						96000
						192000
					]
					in_bit_depth [ 16 ]
					in_valid_bit_depth [ 16 ]
				}
				{
					in_rate	[
						8000
						44100
						48000
						96000
						192000
					]
					in_bit_depth [ 32 ]
					in_valid_bit_depth [ 24 ]
				}
				{
					in_rate	[
						8000
						44100
						48000
						96000
						192000
					]
					in_bit_depth [ 32 ]
					in_valid_bit_depth [ 32 ]
				}
			]

			num_output_audio_formats 5
			CombineArrays.Object.Base.output_audio_format [
				{
					out_rate	[
						8000
						44100
						48000
						96000
						192000
					]
                                        out_bit_depth [ 32 ]
                                        out_valid_bit_depth [ 32 ]
                                }
                        ]
		}

		Object.Widget.phase_vocoder.1 {
			scheduler_domain DP
			domain_id 123
			stack_bytes_requirement 4096
			heap_bytes_requirement 49152

			num_input_audio_formats 1
                        num_output_audio_formats 1
			Object.Base.input_audio_format [
                                {
                                        in_bit_depth		32
                                        in_valid_bit_depth	32
					in_channels		2
					ibs 			3840
				}
			]
			Object.Base.output_audio_format [
				{
                                        out_bit_depth		32
                                        out_valid_bit_depth	32
					out_channels		2
					obs 			1920
                                }
                        ]
			Object.Control {
				bytes."1" {
					name 'Pre Mixer $COMPR_PCM_NAME Phase Vocoder bytes'
					<include/components/phase_vocoder/hann_1024_256.conf>
				}
				mixer."1" {
					name 'Pre Mixer $COMPR_PCM_NAME Phase Vocoder enable'
				}
				enum."1" {
					name 'Pre Mixer $COMPR_PCM_NAME Phase Vocoder speed'
				}
			}
		}

		Object.Widget.mixin.1 {
			Object.Base.input_audio_format [
				{
					in_rate			48000
					in_bit_depth            32
					in_valid_bit_depth      32
				}
			]
			Object.Base.output_audio_format [
				{
					out_rate		48000
					out_bit_depth		32
					out_valid_bit_depth	32
				}
			]
		}
	}
]

Object.PCM.pcm [
	{
		name $COMPR_PCM_NAME
		id $COMPR_PCM_ID
		direction playback
		compress "true"

		Object.Base.fe_dai.1 {
			name "$COMPR_PCM_NAME"
		}

		Object.PCM.pcm_caps.1 {
			name $COMPR_PCM_NAME
			formats 'S32_LE'
			rates '8000'
		}
	}
]

Object.Base.route [
	{
		source  $COMPR_PIPELINE_SRC
		sink	$COMPR_PIPELINE_SINK
	}
	{
		source  host-copier.$COMPR_PCM_ID.playback
		sink	decoder.$COMPR_PIPELINE_ID.1
	}
]
